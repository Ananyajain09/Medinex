<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Doctor Dashboard ‚Äî Medinex</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --sidebar-bg: #ffffff;
      --sidebar-hover: #f5f1eb;
      --sidebar-border: #e8e0d5;
      --accent: #1e90ff;
      --accent-dark: #0b60c1;
      --accent-muted: #EFF6FF;
      --bg: #f6f3ef;
      --surface: #ffffff;
      --surface-2: #f8f5f2;
      --border: #e8e0d5;
      --border-dark: #d6cfc5;
      --text-primary: #0b2340;
      --text-secondary: #4a5b74;
      --text-muted: #8a97a8;
      --green: #10B981;
      --green-bg: #ECFDF5;
      --amber: #F59E0B;
      --amber-bg: #FFFBEB;
      --red: #EF4444;
      --red-bg: #FEF2F2;
      --sidebar-w: 252px;
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'DM Sans', sans-serif; background: var(--bg); color: var(--text-primary); display: flex; min-height: 100vh; font-size: 14px; line-height: 1.5; }

    /* ‚îÄ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ */
    .sidebar { width: var(--sidebar-w); background: var(--sidebar-bg); border-right: 1px solid var(--sidebar-border); position: fixed; top: 0; left: 0; bottom: 0; display: flex; flex-direction: column; z-index: 200; box-shadow: 4px 0 16px rgba(11,35,64,0.05); }
    .sidebar-brand { padding: 26px 22px 22px; border-bottom: 1px solid var(--sidebar-border); display: flex; align-items: center; gap: 11px; }
    .brand-mark { width: 38px; height: 38px; border-radius: 11px; background: linear-gradient(135deg, #0b60c1, #1e90ff, #4fc3f7); position: relative; flex-shrink: 0; box-shadow: 0 4px 14px rgba(11,96,193,0.4); }
    .brand-mark::before { content: ""; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); width: 8px; height: 20px; background: white; border-radius: 2px; }
    .brand-mark::after { content: ""; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); width: 20px; height: 8px; background: white; border-radius: 2px; }
    .brand-name { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 700; color: var(--text-primary); letter-spacing: -0.3px; }
    .sidebar-section { padding: 18px 12px 4px; }
    .sidebar-section-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.2px; color: var(--text-muted); padding: 0 10px; margin-bottom: 6px; }
    .nav-item { display: flex; align-items: center; gap: 10px; padding: 9px 10px; border-radius: 8px; cursor: pointer; transition: all 0.15s; font-size: 13.5px; font-weight: 500; color: var(--text-secondary); text-decoration: none; margin-bottom: 1px; }
    .nav-item:hover { background: var(--sidebar-hover); color: var(--text-primary); }
    .nav-item.active { background: var(--accent-muted); color: var(--accent); font-weight: 600; }
    .nav-icon { width: 17px; height: 17px; flex-shrink: 0; opacity: 0.7; }
    .nav-item.active .nav-icon, .nav-item:hover .nav-icon { opacity: 1; }
    .nav-badge { margin-left: auto; background: var(--red); color: white; font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 20px; min-width: 20px; text-align: center; }
    .sidebar-bottom { margin-top: auto; border-top: 1px solid var(--sidebar-border); padding: 14px 12px; }
    .doctor-sidebar-card { display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 8px; cursor: pointer; transition: background 0.15s; }
    .doctor-sidebar-card:hover { background: var(--sidebar-hover); }

    /* ‚îÄ‚îÄ‚îÄ AVATARS ‚îÄ‚îÄ‚îÄ */
    .avatar { width: 34px; height: 34px; border-radius: 50%; background: linear-gradient(135deg, #0b60c1, #1e90ff); display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 700; color: white; flex-shrink: 0; }
    .avatar-lg { width: 56px; height: 56px; font-size: 22px; }
    .avatar-md { width: 40px; height: 40px; font-size: 15px; }
    .avatar-patient { background: linear-gradient(135deg, #7C3AED, #a855f7); }

    .sidebar-user-name { font-size: 13px; font-weight: 600; color: var(--text-primary); }
    .sidebar-user-role { font-size: 11px; color: var(--text-muted); margin-top: 1px; }

    /* ‚îÄ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ */
    .main { margin-left: var(--sidebar-w); flex: 1; display: flex; flex-direction: column; min-height: 100vh; }
    .topbar { background: var(--surface); border-bottom: 1px solid var(--border); padding: 0 32px; height: 58px; display: flex; align-items: center; position: sticky; top: 0; z-index: 100; }
    .topbar-title { font-family: 'Playfair Display', serif; font-size: 17px; font-weight: 600; color: var(--text-primary); flex: 1; }
    .topbar-badge { display: flex; align-items: center; gap: 8px; background: var(--green-bg); border: 1px solid #86efac; border-radius: 20px; padding: 5px 12px; font-size: 12px; font-weight: 600; color: #059669; }
    .topbar-badge .dot { width: 7px; height: 7px; border-radius: 50%; background: var(--green); }

    .content { padding: 28px 32px; flex: 1; }
    .tab-content { display: none; animation: fadeIn 0.2s ease; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    /* ‚îÄ‚îÄ‚îÄ SECTION HEADER ‚îÄ‚îÄ‚îÄ */
    .section-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 20px; }
    .section-title { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 700; color: var(--text-primary); }
    .section-sub { font-size: 13px; color: var(--text-secondary); margin-top: 3px; }

    /* ‚îÄ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ‚îÄ */
    .btn-primary { background: var(--accent); color: white; border: none; border-radius: 8px; padding: 9px 18px; font-size: 13px; font-weight: 600; font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 6px; }
    .btn-primary:hover { background: var(--accent-dark); transform: translateY(-1px); box-shadow: 0 4px 14px rgba(30,144,255,0.3); }
    .btn-ghost { background: none; border: 1px solid var(--border); color: var(--text-secondary); border-radius: 8px; padding: 8px 16px; font-size: 13px; font-weight: 500; font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s; }
    .btn-ghost:hover { border-color: var(--accent); color: var(--accent); }
    .btn-accept { background: var(--green-bg); color: #059669; border: 1px solid #86efac; border-radius: 8px; padding: 7px 14px; font-size: 12px; font-weight: 600; font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s; }
    .btn-accept:hover { background: #059669; color: white; border-color: #059669; }
    .btn-decline { background: var(--red-bg); color: var(--red); border: 1px solid #fca5a5; border-radius: 8px; padding: 7px 14px; font-size: 12px; font-weight: 600; font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s; }
    .btn-decline:hover { background: var(--red); color: white; border-color: var(--red); }
    .btn-history { background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.22); color: white; border-radius: 8px; padding: 8px 14px; font-size: 12px; font-weight: 600; font-family: 'DM Sans', sans-serif; cursor: pointer; transition: all 0.2s; }
    .btn-history:hover { background: rgba(255,255,255,0.22); }

    /* ‚îÄ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ‚îÄ */
    .card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; box-shadow: 0 1px 6px rgba(11,35,64,0.04); }
    .card-header { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
    .card-header-title { font-size: 14px; font-weight: 600; color: var(--text-primary); }
    .card-body { padding: 20px; }

    /* ‚îÄ‚îÄ‚îÄ GRIDS ‚îÄ‚îÄ‚îÄ */
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .grid-3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 16px; }

    /* ‚îÄ‚îÄ‚îÄ STAT CARDS ‚îÄ‚îÄ‚îÄ */
    .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 18px 20px; }
    .stat-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
    .stat-label { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.7px; color: var(--text-muted); }
    .stat-icon-wrap { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
    .ic-blue { background: var(--accent-muted); color: var(--accent); }
    .ic-green { background: var(--green-bg); color: var(--green); }
    .ic-amber { background: var(--amber-bg); color: var(--amber); }
    .stat-num { font-family: 'DM Mono', monospace; font-size: 26px; font-weight: 500; color: var(--text-primary); line-height: 1; }
    .stat-delta { font-size: 12px; color: var(--text-muted); margin-top: 5px; }

    /* ‚îÄ‚îÄ‚îÄ REQUEST ITEMS ‚îÄ‚îÄ‚îÄ */
    .request-item { display: flex; align-items: center; gap: 14px; padding: 14px 0; border-bottom: 1px solid var(--border); }
    .request-item:last-child { border-bottom: none; }
    .request-info { flex: 1; min-width: 0; }
    .request-name { font-size: 13px; font-weight: 600; color: var(--text-primary); }
    .request-meta { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
    .request-actions { display: flex; gap: 8px; flex-shrink: 0; }

    /* ‚îÄ‚îÄ‚îÄ PATIENT ROWS ‚îÄ‚îÄ‚îÄ */
    .patient-row { display: flex; align-items: center; gap: 13px; padding: 13px 16px; border-radius: 10px; border: 1px solid var(--border); margin-bottom: 8px; background: var(--surface); transition: all 0.2s; cursor: pointer; }
    .patient-row:hover { border-color: var(--accent); box-shadow: 0 2px 12px rgba(30,144,255,0.08); }
    .patient-row.selected { border-color: var(--accent); background: var(--accent-muted); }
    .patient-info { flex: 1; min-width: 0; }
    .patient-name { font-size: 13px; font-weight: 600; color: var(--text-primary); }
    .patient-sub { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

    /* ‚îÄ‚îÄ‚îÄ PILLS ‚îÄ‚îÄ‚îÄ */
    .pill { font-size: 11px; padding: 3px 9px; border-radius: 20px; font-weight: 500; }
    .pill-green { background: var(--green-bg); color: #059669; }
    .pill-blue { background: var(--accent-muted); color: var(--accent); }
    .pill-amber { background: var(--amber-bg); color: #D97706; }

    /* ‚îÄ‚îÄ‚îÄ SUMMARY PANEL ‚îÄ‚îÄ‚îÄ */
    .summary-panel { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; box-shadow: 0 1px 6px rgba(11,35,64,0.04); }
    .summary-header { background: linear-gradient(135deg, #0b2340, #1a3a6b); padding: 20px 22px; display: flex; align-items: center; gap: 14px; }
    .summary-header-info { flex: 1; }
    .summary-header-info h3 { font-family: 'Playfair Display', serif; font-size: 17px; color: white; font-weight: 600; }
    .summary-header-info p { font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 3px; }

    .summary-vitals { display: flex; border-bottom: 1px solid var(--border); }
    .summary-vital { flex: 1; padding: 13px 16px; border-right: 1px solid var(--border); }
    .summary-vital:last-child { border-right: none; }
    .sv-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-muted); font-weight: 700; }
    .sv-value { font-family: 'DM Mono', monospace; font-size: 15px; font-weight: 500; color: var(--text-primary); margin-top: 4px; }

    .summary-body { padding: 18px 20px; }
    .divider { height: 1px; background: var(--border); margin: 14px 0; }

    /* ‚îÄ‚îÄ‚îÄ RX SUB-TABS ‚îÄ‚îÄ‚îÄ */
    .rx-tabs { display: flex; gap: 6px; margin-bottom: 16px; background: var(--surface-2); padding: 5px; border-radius: 10px; width: fit-content; }
    .rx-tab { padding: 7px 16px; border-radius: 7px; border: none; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600; color: var(--text-muted); cursor: pointer; background: none; transition: all 0.2s; }
    .rx-tab.active { background: var(--surface); color: var(--accent); box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
    .rx-section { display: none; }
    .rx-section.active { display: block; animation: fadeIn 0.2s ease; }

    /* ‚îÄ‚îÄ‚îÄ FORM CONTROLS ‚îÄ‚îÄ‚îÄ */
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .form-group { margin-bottom: 14px; }
    .form-label { font-size: 11px; font-weight: 700; color: var(--text-secondary); margin-bottom: 6px; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
    .form-control { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px; font-size: 13px; font-family: 'DM Sans', sans-serif; color: var(--text-primary); background: var(--surface); outline: none; transition: border-color 0.2s, box-shadow 0.2s; }
    .form-control:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(30,144,255,0.08); }

    /* ‚îÄ‚îÄ‚îÄ MED ROWS ‚îÄ‚îÄ‚îÄ */
    .med-row { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr auto; gap: 8px; margin-bottom: 8px; align-items: center; }
    .btn-remove-med { width: 32px; height: 32px; border-radius: 7px; border: 1px solid var(--border); background: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; transition: all 0.2s; flex-shrink: 0; }
    .btn-remove-med:hover { border-color: var(--red); color: var(--red); background: var(--red-bg); }
    .btn-add-med { display: flex; align-items: center; gap: 6px; font-size: 13px; font-weight: 600; color: var(--accent); background: var(--accent-muted); border: 1px dashed #93c5fd; border-radius: 8px; padding: 8px 14px; cursor: pointer; transition: all 0.2s; font-family: 'DM Sans', sans-serif; width: 100%; justify-content: center; margin-bottom: 14px; }
    .btn-add-med:hover { background: #dbeafe; border-color: var(--accent); }

    /* ‚îÄ‚îÄ‚îÄ UPLOAD ‚îÄ‚îÄ‚îÄ */
    .upload-zone { border: 2px dashed var(--border-dark); border-radius: 10px; padding: 32px 20px; text-align: center; cursor: pointer; transition: all 0.2s; background: var(--surface-2); }
    .upload-zone:hover { border-color: var(--accent); background: var(--accent-muted); }
    .upload-zone h4 { font-size: 15px; font-weight: 600; color: var(--text-primary); margin-top: 10px; }
    .upload-zone p { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
    .upload-preview { display: none; margin-top: 14px; position: relative; }
    .upload-preview img { width: 100%; border-radius: 8px; border: 1px solid var(--border); max-height: 260px; object-fit: cover; }
    .btn-remove-img { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.55); color: white; border: none; border-radius: 6px; padding: 4px 10px; font-size: 12px; cursor: pointer; font-family: 'DM Sans', sans-serif; }

    /* ‚îÄ‚îÄ‚îÄ NO PATIENT PLACEHOLDER ‚îÄ‚îÄ‚îÄ */
    .no-patient { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 60px 20px; text-align: center; border: 2px dashed var(--border); border-radius: 14px; background: var(--surface); }
    .no-patient .ni { font-size: 38px; margin-bottom: 14px; }
    .no-patient h4 { font-size: 15px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; }
    .no-patient p { font-size: 13px; color: var(--text-muted); }

    /* ‚îÄ‚îÄ‚îÄ HISTORY MODAL ‚îÄ‚îÄ‚îÄ */
    .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(11,35,64,0.65); backdrop-filter: blur(8px); z-index: 500; align-items: center; justify-content: center; padding: 20px; }
    .modal-overlay.show { display: flex; }
    .modal-box { background: var(--surface); border-radius: 16px; width: 100%; max-width: 680px; max-height: 88vh; overflow-y: auto; animation: fadeIn 0.25s ease; }
    .modal-header { padding: 20px 24px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: var(--surface); z-index: 10; }
    .modal-header h3 { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 700; }
    .modal-close { width: 32px; height: 32px; border-radius: 7px; border: 1px solid var(--border); background: none; font-size: 18px; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .modal-close:hover { color: var(--text-primary); border-color: var(--text-primary); }
    .modal-body { padding: 24px; }
    .history-section { margin-bottom: 24px; }
    .history-section-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-muted); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }

    /* ‚îÄ‚îÄ‚îÄ PROFILE ‚îÄ‚îÄ‚îÄ */
    .profile-hero { background: linear-gradient(135deg, #0b2340, #1a3a6b); border-radius: 14px; padding: 26px 28px; margin-bottom: 20px; display: flex; align-items: center; gap: 20px; }
    .profile-hero-info h2 { font-family: 'Playfair Display', serif; font-size: 22px; color: #fff; font-weight: 700; }
    .profile-hero-info p { font-size: 13px; color: rgba(255,255,255,0.5); margin-top: 5px; }
    .profile-hero-tags { display: flex; gap: 8px; margin-top: 12px; }
    .profile-tag { font-size: 12px; padding: 4px 12px; border-radius: 20px; font-weight: 500; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border: 1px solid rgba(255,255,255,0.1); }
    .info-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; }
    .info-field { padding: 13px 15px; border: 1px solid var(--border); border-radius: 9px; background: var(--surface-2); }
    .info-field .lbl { font-size: 10px; text-transform: uppercase; letter-spacing: 0.7px; color: var(--text-muted); font-weight: 700; }
    .info-field .val { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-top: 5px; }

    /* ‚îÄ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ‚îÄ */
    .empty-state { text-align: center; padding: 36px 20px; }
    .empty-icon { width: 46px; height: 46px; background: var(--surface-2); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 13px; font-size: 20px; }
    .empty-state h4 { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 5px; }
    .empty-state p { font-size: 13px; color: var(--text-muted); line-height: 1.6; }

    .info-chip { background: var(--surface-2); border: 1px solid var(--border); border-radius: 8px; padding: 10px 14px; }
    .info-chip .ic-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.7px; color: var(--text-muted); font-weight: 700; }
    .info-chip .ic-value { font-size: 13px; font-weight: 600; color: var(--text-primary); margin-top: 4px; }

    @media (max-width: 1200px) { .grid-2 { grid-template-columns: 1fr; } .info-grid { grid-template-columns: repeat(2,1fr); } }
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
<aside class="sidebar">
  <div class="sidebar-brand">
    <div class="brand-mark"></div>
    <span class="brand-name">Medinex</span>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-label">Main</div>
    <a class="nav-item active" onclick="showTab('overview', this)">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zm-8 8a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/></svg>
      Overview
    </a>
    <a class="nav-item" onclick="showTab('requests', this)">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/></svg>
      Patient Requests
      <span class="nav-badge" id="requestBadge">2</span>
    </a>
    <a class="nav-item" onclick="showTab('patients', this)">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></svg>
      My Patients
    </a>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-label">Account</div>
    <a class="nav-item" onclick="showTab('profile', this)">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/></svg>
      My Profile
    </a>
    <a class="nav-item" onclick="logout()">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/></svg>
      Log Out
    </a>
  </div>

  <div class="sidebar-bottom">
    <div class="doctor-sidebar-card" onclick="showTab('profile', null)">
      <div class="avatar" id="sidebarAvatar">D</div>
      <div>
        <div class="sidebar-user-name" id="sidebarName">Doctor</div>
        <div class="sidebar-user-role">Doctor ¬∑ Medinex</div>
      </div>
    </div>
  </div>
</aside>

<!-- ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê -->
<div class="main">
  <div class="topbar">
    <div class="topbar-title" id="topbarTitle">Overview</div>
    <div class="topbar-badge"><div class="dot"></div>Verified Doctor</div>
  </div>

  <div class="content">

    <!-- ‚ïê‚ïê‚ïê OVERVIEW ‚ïê‚ïê‚ïê -->
    <div class="tab-content active" id="tab-overview">
      <div class="section-header">
        <div>
          <div class="section-title">Good morning, <span id="overviewName">Doctor</span></div>
          <div class="section-sub">Here's a summary of your patients and requests</div>
        </div>
      </div>

      <div class="grid-3" style="margin-bottom:22px;">
        <div class="stat-card">
          <div class="stat-top"><div class="stat-label">My Patients</div><div class="stat-icon-wrap ic-blue"><svg width="15" height="15" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></svg></div></div>
          <div class="stat-num" id="statPatients">0</div>
          <div class="stat-delta">Active connections</div>
        </div>
        <div class="stat-card">
          <div class="stat-top"><div class="stat-label">Pending Requests</div><div class="stat-icon-wrap ic-amber"><svg width="15" height="15" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/></svg></div></div>
          <div class="stat-num" id="statRequests">2</div>
          <div class="stat-delta">Awaiting your response</div>
        </div>
        <div class="stat-card">
          <div class="stat-top"><div class="stat-label">Prescriptions Sent</div><div class="stat-icon-wrap ic-green"><svg width="15" height="15" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z" clip-rule="evenodd"/></svg></div></div>
          <div class="stat-num" id="statRx">0</div>
          <div class="stat-delta">Total prescriptions issued</div>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-header">
            <div class="card-header-title">Pending Requests</div>
            <button class="btn-ghost" onclick="showTab('requests', null)" style="font-size:12px;padding:5px 12px;">View All ‚Üí</button>
          </div>
          <div class="card-body" id="overviewRequests"></div>
        </div>
        <div class="card">
          <div class="card-header">
            <div class="card-header-title">Recent Patients</div>
            <button class="btn-ghost" onclick="showTab('patients', null)" style="font-size:12px;padding:5px 12px;">View All ‚Üí</button>
          </div>
          <div class="card-body" id="overviewPatients">
            <div class="empty-state"><div class="empty-icon">üßë</div><h4>No Patients Yet</h4><p>Accept requests to start managing patient care.</p></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê REQUESTS ‚ïê‚ïê‚ïê -->
    <div class="tab-content" id="tab-requests">
      <div class="section-header">
        <div><div class="section-title">Patient Requests</div><div class="section-sub">Patients requesting to connect with you</div></div>
      </div>
      <div class="card"><div class="card-body" id="requestsList"></div></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê MY PATIENTS ‚ïê‚ïê‚ïê -->
    <div class="tab-content" id="tab-patients">
      <div class="section-header">
        <div><div class="section-title">My Patients</div><div class="section-sub">Select a patient to view summary and write prescriptions</div></div>
      </div>
      <div class="grid-2">
        <div id="patientList"></div>
        <div id="summaryPanelWrap">
          <div class="no-patient">
            <div class="ni">üëà</div>
            <h4>Select a Patient</h4>
            <p>Click a patient on the left to view<br/>their health summary.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê PROFILE ‚ïê‚ïê‚ïê -->
    <div class="tab-content" id="tab-profile">
      <div class="section-header">
        <div class="section-title">My Profile</div>
        <button class="btn-primary" onclick="toggleEditProfile()">
          <svg width="13" height="13" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/></svg>
          Edit Profile
        </button>
      </div>

      <div class="profile-hero">
        <div class="avatar avatar-lg" id="profilePic">D</div>
        <div class="profile-hero-info">
          <h2 id="profileName">Dr. Doctor</h2>
          <p id="profileEmailDisplay">doctor@email.com</p>
          <div class="profile-hero-tags">
            <span class="profile-tag">Doctor Account</span>
            <span class="profile-tag" id="profileSpecTag">Specialty: ‚Äî</span>
          </div>
        </div>
      </div>

      <div class="card" style="margin-bottom:16px;">
        <div class="card-header"><div class="card-header-title">Professional Information</div></div>
        <div class="card-body">
          <div class="info-grid">
            <div class="info-field"><div class="lbl">First Name</div><div class="val" id="pf-firstname">‚Äî</div></div>
            <div class="info-field"><div class="lbl">Last Name</div><div class="val" id="pf-lastname">‚Äî</div></div>
            <div class="info-field"><div class="lbl">Email</div><div class="val" id="pf-email">‚Äî</div></div>
            <div class="info-field"><div class="lbl">Phone</div><div class="val" id="pf-phone">‚Äî</div></div>
            <div class="info-field"><div class="lbl">Specialty</div><div class="val" id="pf-specialty">‚Äî</div></div>
            <div class="info-field"><div class="lbl">License No.</div><div class="val" id="pf-license">‚Äî</div></div>
            <div class="info-field"><div class="lbl">Hospital / Clinic</div><div class="val" id="pf-hospital">‚Äî</div></div>
            <div class="info-field"><div class="lbl">City</div><div class="val" id="pf-city">‚Äî</div></div>
            <div class="info-field"><div class="lbl">State</div><div class="val" id="pf-state">‚Äî</div></div>
          </div>
        </div>
      </div>

      <div class="card" id="editProfileCard" style="display:none;">
        <div class="card-header"><div class="card-header-title">Edit Profile</div></div>
        <div class="card-body">
          <div class="form-row">
            <div class="form-group"><label class="form-label">Hospital / Clinic</label><input type="text" class="form-control" id="edit_hospital" placeholder="Hospital or clinic name" /></div>
            <div class="form-group"><label class="form-label">City</label><input type="text" class="form-control" id="edit_city" placeholder="Your city" /></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">State</label><input type="text" class="form-control" id="edit_state" placeholder="Your state" /></div>
            <div class="form-group"><label class="form-label">Phone</label><input type="tel" class="form-control" id="edit_phone" placeholder="Phone number" /></div>
          </div>
          <button class="btn-primary" onclick="saveProfile()" style="width:100%;justify-content:center;">Save Changes</button>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ‚ïê‚ïê‚ïê HISTORY MODAL ‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="historyModal">
  <div class="modal-box">
    <div class="modal-header">
      <h3 id="modalTitle">Patient History</h3>
      <button class="modal-close" onclick="closeHistory()">‚úï</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<script>
  const tabTitles = { overview:'Overview', requests:'Patient Requests', patients:'My Patients', profile:'My Profile' };

  function showTab(tab, el) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById('tab-' + tab).classList.add('active');
    document.getElementById('topbarTitle').textContent = tabTitles[tab] || tab;
    if (el) el.classList.add('active');
  }

  // ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ
  const pendingRequests = [
    { id:1, name:'Riya Sharma', age:28, blood:'B+', condition:'Asthma', phone:'+91 98765 43210', weight:'55', height:'162', allergies:'None' },
    { id:2, name:'Arjun Mehta', age:45, blood:'O+', condition:'Hypertension', phone:'+91 91234 56789', weight:'82', height:'175', allergies:'Penicillin' },
  ];
  const acceptedPatients = [];
  let sentRxCount = 0;
  let selectedPatientId = null;

  // ‚îÄ‚îÄ‚îÄ REQUESTS ‚îÄ‚îÄ‚îÄ
  function renderRequests() {
    const count = pendingRequests.length;
    document.getElementById('requestBadge').textContent = count;
    document.getElementById('statRequests').textContent = count;

    const makeHtml = (list) => list.length ? list.map(p => `
      <div class="request-item" id="req-${p.id}">
        <div class="avatar avatar-md avatar-patient">${p.name.charAt(0)}</div>
        <div class="request-info">
          <div class="request-name">${p.name}</div>
          <div class="request-meta">Age ${p.age} ¬∑ Blood ${p.blood} ¬∑ ${p.condition}</div>
        </div>
        <div class="request-actions">
          <button class="btn-accept" onclick="acceptRequest(${p.id})">Accept</button>
          <button class="btn-decline" onclick="declineRequest(${p.id})">Decline</button>
        </div>
      </div>`).join('')
    : `<div class="empty-state"><div class="empty-icon">‚úÖ</div><h4>All Caught Up!</h4><p>No pending connection requests.</p></div>`;

    document.getElementById('requestsList').innerHTML = makeHtml(pendingRequests);
    document.getElementById('overviewRequests').innerHTML = makeHtml(pendingRequests.slice(0,2));
  }

  function acceptRequest(id) {
    const idx = pendingRequests.findIndex(r => r.id === id);
    if (idx === -1) return;
    acceptedPatients.push(pendingRequests.splice(idx, 1)[0]);
    document.getElementById('statPatients').textContent = acceptedPatients.length;
    renderRequests();
    renderPatientList();
    renderOverviewPatients();
  }

  function declineRequest(id) {
    const idx = pendingRequests.findIndex(r => r.id === id);
    if (idx !== -1) pendingRequests.splice(idx, 1);
    renderRequests();
  }

  // ‚îÄ‚îÄ‚îÄ PATIENT LIST ‚îÄ‚îÄ‚îÄ
  function renderPatientList() {
    const el = document.getElementById('patientList');
    if (!acceptedPatients.length) {
      el.innerHTML = `<div class="empty-state"><div class="empty-icon">üßë</div><h4>No Patients</h4><p>Accept requests to see patients here.</p></div>`;
      return;
    }
    el.innerHTML = acceptedPatients.map(p => `
      <div class="patient-row ${selectedPatientId===p.id?'selected':''}" onclick="selectPatient(${p.id})">
        <div class="avatar avatar-patient">${p.name.charAt(0)}</div>
        <div class="patient-info">
          <div class="patient-name">${p.name}</div>
          <div class="patient-sub">Age ${p.age} ¬∑ ${p.condition}</div>
        </div>
        <span class="pill pill-green">Active</span>
      </div>`).join('');
  }

  function renderOverviewPatients() {
    const el = document.getElementById('overviewPatients');
    if (!acceptedPatients.length) {
      el.innerHTML = `<div class="empty-state"><div class="empty-icon">üßë</div><h4>No Patients Yet</h4><p>Accept requests to start managing patient care.</p></div>`;
      return;
    }
    el.innerHTML = acceptedPatients.slice(0,4).map(p => `
      <div class="patient-row" onclick="showTab('patients',null);setTimeout(()=>selectPatient(${p.id}),50)">
        <div class="avatar avatar-patient">${p.name.charAt(0)}</div>
        <div class="patient-info"><div class="patient-name">${p.name}</div><div class="patient-sub">${p.condition} ¬∑ Age ${p.age}</div></div>
        <span class="pill pill-green">Active</span>
      </div>`).join('');
  }

  function selectPatient(id) {
    selectedPatientId = id;
    renderPatientList();
    const p = acceptedPatients.find(pt => pt.id === id);
    if (p) buildSummaryPanel(p);
  }

  function buildSummaryPanel(p) {
    const pid = p.id;
    document.getElementById('summaryPanelWrap').innerHTML = `
      <div class="summary-panel">
        <div class="summary-header">
          <div class="avatar avatar-md avatar-patient">${p.name.charAt(0)}</div>
          <div class="summary-header-info">
            <h3>${p.name}</h3>
            <p>Age ${p.age} ¬∑ ${p.phone}</p>
          </div>
          <button class="btn-history" onclick="openHistory(${pid})">üìã Detailed History</button>
        </div>

        <div class="summary-vitals">
          <div class="summary-vital"><div class="sv-label">Blood Group</div><div class="sv-value">${p.blood}</div></div>
          <div class="summary-vital"><div class="sv-label">Height</div><div class="sv-value">${p.height} cm</div></div>
          <div class="summary-vital"><div class="sv-label">Weight</div><div class="sv-value">${p.weight} kg</div></div>
          <div class="summary-vital"><div class="sv-label">Allergies</div><div class="sv-value" style="font-size:12px;padding-top:4px">${p.allergies}</div></div>
        </div>

        <div class="summary-body">
          <div style="display:flex;gap:10px;margin-bottom:14px;">
            <div class="info-chip" style="flex:1"><div class="ic-label">Chronic Condition</div><div class="ic-value">${p.condition}</div></div>
            <div class="info-chip" style="flex:1"><div class="ic-label">Last Prescription</div><div class="ic-value">‚Äî</div></div>
          </div>

          <div class="divider"></div>
          <div style="font-size:13px;font-weight:700;color:var(--text-primary);margin-bottom:14px;">Issue Prescription</div>

          <div class="rx-tabs">
            <button class="rx-tab active" onclick="switchRxTab('form',this,${pid})">üìù Fill Form</button>
            <button class="rx-tab" onclick="switchRxTab('photo',this,${pid})">üì∑ Upload Photo</button>
          </div>

          <!-- FORM -->
          <div class="rx-section active" id="rxForm-${pid}">
            <div class="form-group">
              <label class="form-label">Diagnosis / Notes</label>
              <textarea class="form-control" id="rxDiag-${pid}" placeholder="e.g. Acute bronchitis ‚Äî rest and fluids advised" style="height:70px;resize:none;"></textarea>
            </div>
            <div style="display:grid;grid-template-columns:2fr 1fr 1fr 1fr auto;gap:8px;margin-bottom:8px;padding:0 2px;">
              <div style="font-size:10px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px">Medicine</div>
              <div style="font-size:10px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px">Dose</div>
              <div style="font-size:10px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px">Frequency</div>
              <div style="font-size:10px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px">Duration</div>
              <div></div>
            </div>
            <div id="medRows-${pid}">
              <div class="med-row">
                <input class="form-control" placeholder="e.g. Amoxicillin" />
                <input class="form-control" placeholder="500mg" />
                <input class="form-control" placeholder="3x/day" />
                <input class="form-control" placeholder="5 days" />
                <button class="btn-remove-med" onclick="removeMed(this)">√ó</button>
              </div>
            </div>
            <button class="btn-add-med" onclick="addMed(${pid})">+ Add Medicine</button>
            <div class="form-group">
              <label class="form-label">Additional Instructions</label>
              <input type="text" class="form-control" placeholder="e.g. Take after meals, avoid dairy" />
            </div>
            <button class="btn-primary" style="width:100%;justify-content:center;" onclick="sendRxForm(${pid},'${p.name}')">Send Prescription ‚Üí</button>
          </div>

          <!-- PHOTO -->
          <div class="rx-section" id="rxPhoto-${pid}">
            <div class="upload-zone" onclick="document.getElementById('rxFile-${pid}').click()">
              <svg width="32" height="32" viewBox="0 0 20 20" fill="#8a97a8"><path fill-rule="evenodd" d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/></svg>
              <h4>Take or upload a photo</h4>
              <p>JPG, PNG ¬∑ Handwritten prescriptions accepted</p>
            </div>
            <input type="file" accept="image/*" id="rxFile-${pid}" style="display:none" onchange="previewPhoto(this,${pid})" />
            <div class="upload-preview" id="rxPrev-${pid}">
              <img id="rxPrevImg-${pid}" src="" alt="Preview" />
              <button class="btn-remove-img" onclick="removePhoto(${pid})">Remove</button>
            </div>
            <button class="btn-primary" style="width:100%;justify-content:center;margin-top:14px;" onclick="sendRxPhoto(${pid},'${p.name}')">Send Prescription ‚Üí</button>
          </div>
        </div>
      </div>`;
  }

  function switchRxTab(type, btn, pid) {
    // find siblings
    btn.closest('.rx-tabs').querySelectorAll('.rx-tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('rxForm-' + pid).classList.toggle('active', type === 'form');
    document.getElementById('rxPhoto-' + pid).classList.toggle('active', type === 'photo');
  }

  function addMed(pid) {
    const c = document.getElementById('medRows-' + pid);
    const d = document.createElement('div');
    d.className = 'med-row';
    d.innerHTML = `<input class="form-control" placeholder="Medicine name"/><input class="form-control" placeholder="Dose"/><input class="form-control" placeholder="Frequency"/><input class="form-control" placeholder="Duration"/><button class="btn-remove-med" onclick="removeMed(this)">√ó</button>`;
    c.appendChild(d);
  }

  function removeMed(btn) {
    const row = btn.closest('.med-row');
    const c = row.parentElement;
    if (c.querySelectorAll('.med-row').length > 1) row.remove();
    else row.querySelectorAll('input').forEach(i => i.value = '');
  }

  function previewPhoto(input, pid) {
    if (!input.files[0]) return;
    const r = new FileReader();
    r.onload = e => { document.getElementById('rxPrevImg-'+pid).src = e.target.result; document.getElementById('rxPrev-'+pid).style.display='block'; };
    r.readAsDataURL(input.files[0]);
  }

  function removePhoto(pid) {
    document.getElementById('rxPrev-'+pid).style.display='none';
    document.getElementById('rxFile-'+pid).value='';
    document.getElementById('rxPrevImg-'+pid).src='';
  }

  function sendRxForm(pid, name) {
    const diag = document.getElementById('rxDiag-'+pid).value.trim();
    if (!diag) { alert('Please add a diagnosis or notes.'); return; }
    sentRxCount++;
    document.getElementById('statRx').textContent = sentRxCount;
    alert(`Prescription sent to ${name} successfully! ‚úÖ`);
  }

  function sendRxPhoto(pid, name) {
    const img = document.getElementById('rxPrevImg-'+pid);
    if (!img || !img.src || img.src === window.location.href) { alert('Please upload a photo first.'); return; }
    sentRxCount++;
    document.getElementById('statRx').textContent = sentRxCount;
    alert(`Prescription photo sent to ${name} successfully! ‚úÖ`);
  }

  // ‚îÄ‚îÄ‚îÄ HISTORY MODAL ‚îÄ‚îÄ‚îÄ
  function openHistory(pid) {
    const p = acceptedPatients.find(pt => pt.id === pid);
    if (!p) return;
    document.getElementById('modalTitle').textContent = p.name + ' ‚Äî Full Medical History';
    document.getElementById('modalBody').innerHTML = `
      <div class="history-section">
        <div class="history-section-title">Personal Details</div>
        <div class="info-grid" style="grid-template-columns:repeat(2,1fr);">
          <div class="info-field"><div class="lbl">Age</div><div class="val">${p.age} years</div></div>
          <div class="info-field"><div class="lbl">Blood Group</div><div class="val">${p.blood}</div></div>
          <div class="info-field"><div class="lbl">Height</div><div class="val">${p.height} cm</div></div>
          <div class="info-field"><div class="lbl">Weight</div><div class="val">${p.weight} kg</div></div>
          <div class="info-field"><div class="lbl">Allergies</div><div class="val">${p.allergies}</div></div>
          <div class="info-field"><div class="lbl">Chronic Condition</div><div class="val">${p.condition}</div></div>
        </div>
      </div>
      <div class="history-section">
        <div class="history-section-title">Past Prescriptions</div>
        <div class="empty-state" style="padding:20px 0;">
          <div class="empty-icon">üíä</div><h4>No Past Prescriptions</h4><p>Prescriptions you issue will appear here.</p>
        </div>
      </div>
      <div class="history-section">
        <div class="history-section-title">Uploaded Documents</div>
        <div class="empty-state" style="padding:20px 0;">
          <div class="empty-icon">üìÅ</div><h4>No Documents</h4><p>Patient has not uploaded any documents yet.</p>
        </div>
      </div>`;
    document.getElementById('historyModal').classList.add('show');
  }

  function closeHistory() { document.getElementById('historyModal').classList.remove('show'); }
  document.getElementById('historyModal').addEventListener('click', function(e) { if (e.target===this) closeHistory(); });

  // ‚îÄ‚îÄ‚îÄ PROFILE ‚îÄ‚îÄ‚îÄ
  function loadProfile() {
    const fn = localStorage.getItem('user_firstname') || '‚Äî';
    const ln = localStorage.getItem('user_lastname') || '‚Äî';
    const email = localStorage.getItem('user_email') || '‚Äî';
    const phone = localStorage.getItem('user_phone') || '‚Äî';
    const specialty = localStorage.getItem('user_specialty') || '‚Äî';
    const license = localStorage.getItem('user_license_number') || '‚Äî';
    const hospital = localStorage.getItem('user_hospital') || '‚Äî';
    const city = localStorage.getItem('user_city') || '‚Äî';
    const state = localStorage.getItem('user_state') || '‚Äî';
    const initial = fn !== '‚Äî' ? fn.charAt(0).toUpperCase() : 'D';
    const fullName = fn !== '‚Äî' ? fn + ' ' + ln : 'Doctor';

    ['sidebarAvatar','profilePic'].forEach(id => { const el=document.getElementById(id); if(el) el.textContent=initial; });
    document.getElementById('sidebarName').textContent = fn !== '‚Äî' ? 'Dr. '+fn : 'Doctor';
    document.getElementById('overviewName').textContent = fn !== '‚Äî' ? 'Dr. '+fn : 'Doctor';
    document.getElementById('profileName').textContent = 'Dr. '+fullName;
    document.getElementById('profileEmailDisplay').textContent = email;
    document.getElementById('profileSpecTag').textContent = 'Specialty: '+specialty;
    document.getElementById('pf-firstname').textContent = fn;
    document.getElementById('pf-lastname').textContent = ln;
    document.getElementById('pf-email').textContent = email;
    document.getElementById('pf-phone').textContent = phone;
    document.getElementById('pf-specialty').textContent = specialty;
    document.getElementById('pf-license').textContent = license;
    document.getElementById('pf-hospital').textContent = hospital;
    document.getElementById('pf-city').textContent = city;
    document.getElementById('pf-state').textContent = state;
  }

  function toggleEditProfile() {
    const c = document.getElementById('editProfileCard');
    c.style.display = c.style.display==='none' ? 'block' : 'none';
    if (c.style.display!=='none') {
      document.getElementById('edit_hospital').value = localStorage.getItem('user_hospital')||'';
      document.getElementById('edit_city').value = localStorage.getItem('user_city')||'';
      document.getElementById('edit_state').value = localStorage.getItem('user_state')||'';
      document.getElementById('edit_phone').value = localStorage.getItem('user_phone')||'';
    }
  }

  function saveProfile() {
    localStorage.setItem('user_hospital', document.getElementById('edit_hospital').value);
    localStorage.setItem('user_city', document.getElementById('edit_city').value);
    localStorage.setItem('user_state', document.getElementById('edit_state').value);
    localStorage.setItem('user_phone', document.getElementById('edit_phone').value);
    loadProfile();
    document.getElementById('editProfileCard').style.display = 'none';
    alert('Profile updated successfully.');
  }

  function logout() { localStorage.clear(); window.location.href = 'index.html'; }

  // ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
  loadProfile();
  renderRequests();
  renderPatientList();
</script>
</body>
</html>